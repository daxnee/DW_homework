<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <div class="form-wrapper">
        <h3>스똬벅스 회원가입</h3>
        <input id="userName" type="text" placeholder="회원이름을 입력해주세요..."  />
        <input id="NickName" type="text" placeholder="사용할 닉네임을 입력해주세요..."  />
        
        <div class="email-box">
          <input id="email" type="text" placeholder="이메일을 입력해주세요..." />
          <span>@</span>
          <select id="emailList">
            <option value="none" selected>직접입력</option>
            <option value="naver">naver.com</option>
            <option value="gmail">gmail.com</option>
            <option value="hanmail">hanmail.net</option>
            <option value="nate">nate.com</option>
          </select>
        </div>
        <input id="Phone" type="text"
          placeholder="연락처를 입력해주세요...(번호만 입력하세요)"
        />
        <div class="question-box">
          <span>회원가입에 동의하나요?</span>
          <input id="isAgree" type="checkbox" />
        </div>
        <div class="join-btn">
          <button id="join" type="button">회원 가입</button>
        </div>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script>
      // 문제 1. 
      //   회원가입 버튼 눌렀을 때, 빈칸 혹은 체크하지 못한 부분이 있다면
      //   '내용을 확인해주세요!'하는 alert을 보여주고 focus 하시오. on click
      // var signUpValue = '';
      $('#join').on('click', function(){
          // var jsonParam = {};
        
          var formWrapper  =  $('.form-wrapper').children();
          for(var i=1; i<formWrapper.length; i++){
            var  elementID = formWrapper[i].id; // json으로 만들예정
            if(formWrapper[i].nodeName === 'INPUT') { // nodeName 대소문자 구별!
              var elementValue = '';
                elementValue = $('#' + elementID).val(); // json에 nodename 
                if(elementValue === ''){
                  console.log(elementValue)
                    alert('내용을 확인해주세요!')
                    $('#'+ elementID).focus();
                    return false;
                }
                if((formWrapper[i].id === 'userName' || formWrapper[i].id === 'nickName') && elementValue.length >=20){
                     //  and가 먼저 실행되니까 앞의 or을 괄호로 묶어줘야 함.
                  alert('20글자 제한')
                    return false;
                
                }
                if(formWrapper[i].id === 'userName' || formWrapper[i].id === 'nickName' ){
                    // 한글 정규식
                    if(elementValue === !onlyKorName(name)){
                      alert('한글로만 입력이 가능합니다!')
                    }
                    return false;
                
                }
                if(formWrapper[i].id === 'phone') {
                   elementValue = elementValue.replace('-','');
                    return false;

                }   
                
                var email = $('#email').val().trim();
                if(email === ''){
                  alert('내용을 확인해주세요')
                  $('#email').focus();
                }
                var emailCompany = $('#emailList option:selected').val();
                if(emailCompany === 'none'){
                  alert('내용을 확인해주세요');
                  $('#emailList').focus();
                  return false;
                }


                // jsonParam.email = email + '@' + emailCompany;
                // doJoin(jsonParam);
                // console.log(jsonParam)
            }
        }
      });
      // 받은 json을 서버로 보내는 함수
      function doJoin(param){
          console.log(param); // json 출력
      }
       

      function onlyKorName(name){
          var regonlyNum = /^[가-힣]+$/;
          var isName = regonlyNum.test(name);
         return isName;
       };

       function onlyNumber(phone){
         var regonlyNum = /^[0-9]/g;
         var isPhone = regonlyNum.test(phone)
         return isPhone;
       }
      
          
      
  
    </script>
  </body>
</html>